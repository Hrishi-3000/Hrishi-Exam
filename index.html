<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hrishi Proctored Exam</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1a73e8;
            --primary-dark: #0d62d9;
            --secondary: #6c8ef5;
            --success: #28a745;
            --warning: #ff9800;
            --danger: #dc3545;
            --light: #f8f9fa;
            --dark: #343a40;
            --gray: #6c757d;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            color: #333;
            line-height: 1.6;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            min-height: 100vh;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 8px 20px rgba(26, 115, 232, 0.3);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
            transform: rotate(30deg);
        }

        header h1 {
            font-size: 32px;
            margin-bottom: 10px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        header p {
            font-size: 18px;
            opacity: 0.9;
        }

        .exam-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border-left: 5px solid var(--primary);
        }

        .info-item {
            display: flex;
            flex-direction: column;
            padding: 10px;
            background: var(--light);
            border-radius: 8px;
        }

        .info-item strong {
            color: var(--primary);
            font-size: 14px;
            margin-bottom: 5px;
        }

        .info-item span {
            font-weight: 600;
            font-size: 16px;
        }

        .warning {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border-left: 5px solid #ffc107;
            color: #856404;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .warning h3 {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 20px;
        }

        .warning h3 i {
            color: #ffc107;
        }

        .warning p {
            margin-bottom: 8px;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .warning p:before {
            content: "â€¢";
            color: #856404;
            font-weight: bold;
        }

        .section-info {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 5px solid var(--primary);
        }

        .section-title {
            font-size: 22px;
            color: var(--primary);
            font-weight: 600;
        }

        .question-counter {
            font-size: 18px;
            font-weight: 600;
            background: var(--primary);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
        }

        .timer-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .timer-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .timer-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }

        .timer-label {
            font-size: 16px;
            color: var(--gray);
            margin-bottom: 10px;
            font-weight: 600;
        }

        .timer {
            font-size: 32px;
            font-weight: bold;
            color: white;
            padding: 15px;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            box-shadow: 0 4px 8px rgba(26, 115, 232, 0.3);
        }

        .question-timer {
            font-size: 28px;
            font-weight: bold;
            color: white;
            padding: 15px;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--warning), #ffad33);
            box-shadow: 0 4px 8px rgba(255, 152, 0, 0.3);
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }

        .progress-bar {
            height: 12px;
            background-color: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .question-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            position: relative;
            border: 1px solid #eaeaea;
        }

        .question-number {
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--primary);
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .question-text {
            margin-bottom: 25px;
            font-size: 18px;
            line-height: 1.6;
            padding: 15px;
            background: var(--light);
            border-radius: 10px;
            border-left: 4px solid var(--primary);
        }

        .options {
            display: grid;
            gap: 12px;
        }

        .option {
            padding: 16px;
            border-radius: 10px;
            transition: all 0.3s;
            border: 2px solid #eaeaea;
            cursor: pointer;
            display: flex;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .option:before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(26, 115, 232, 0.1), transparent);
            transition: left 0.5s;
        }

        .option:hover:before {
            left: 100%;
        }

        .option:hover {
            background-color: #f0f7ff;
            border-color: var(--primary);
            transform: translateX(5px);
        }

        .option input {
            margin-right: 15px;
            cursor: pointer;
            transform: scale(1.2);
        }

        .option label {
            cursor: pointer;
            width: 100%;
            display: block;
            font-size: 16px;
        }

        .option.selected {
            background-color: #e3f2fd;
            border-color: var(--primary);
            box-shadow: 0 4px 8px rgba(26, 115, 232, 0.2);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        button {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(26, 115, 232, 0.3);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(26, 115, 232, 0.4);
            background: linear-gradient(135deg, var(--primary-dark), var(--secondary));
        }

        button:active {
            transform: translateY(1px);
        }

        button:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .submit-btn {
            background: linear-gradient(135deg, var(--success), #20c997);
            box-shadow: 0 4px 8px rgba(40, 167, 69, 0.3);
        }

        .submit-btn:hover {
            background: linear-gradient(135deg, #218838, #1ea67c);
            box-shadow: 0 6px 12px rgba(40, 167, 69, 0.4);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background-color: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 550px;
            width: 90%;
            text-align: center;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            position: relative;
            animation: slideUp 0.4s;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal h2 {
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 28px;
        }

        .modal p {
            margin-bottom: 25px;
            font-size: 18px;
            line-height: 1.6;
        }

        .access-code-input {
            width: 100%;
            padding: 16px;
            margin: 20px 0;
            border: 2px solid var(--primary);
            border-radius: 10px;
            font-size: 18px;
            text-align: center;
            letter-spacing: 3px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .access-code-input:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.2);
        }

        .fullscreen-warning {
            background: linear-gradient(135deg, #f8d7da, #f1aeb5);
            color: #721c24;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            display: none;
            animation: pulse 1s infinite;
            border-left: 5px solid var(--danger);
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .fullscreen-btn {
            background: linear-gradient(135deg, #17a2b8, #6f42c1);
            margin-bottom: 15px;
            padding: 16px 30px;
            font-size: 18px;
        }

        .fullscreen-btn:hover {
            background: linear-gradient(135deg, #138496, #5a2d91);
        }

        .results-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .results-summary {
            margin-bottom: 30px;
            text-align: center;
        }

        .results-summary h2 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 32px;
        }

        .score {
            font-size: 72px;
            font-weight: bold;
            color: var(--success);
            margin: 30px 0;
            padding: 30px;
            border-radius: 20px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border: 5px solid var(--success);
            display: inline-block;
            box-shadow: 0 8px 20px rgba(40, 167, 69, 0.3);
            position: relative;
            overflow: hidden;
        }

        .score:after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(40, 167, 69, 0.1) 0%, rgba(40, 167, 69, 0) 70%);
            transform: rotate(30deg);
        }

        .performance-message {
            font-size: 22px;
            color: var(--dark);
            margin-top: 20px;
            font-style: italic;
        }

        .user-info {
            font-size: 18px;
            color: var(--gray);
            margin-bottom: 15px;
        }

        .no-copy-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: transparent;
            z-index: 9999;
            pointer-events: none;
        }

        .security-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            z-index: 1000;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-progress {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .section-progress-item {
            text-align: center;
            flex: 1;
            padding: 10px;
        }

        .section-progress-item.active {
            color: var(--primary);
            font-weight: bold;
        }

        .section-progress-bar {
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            margin-top: 5px;
            overflow: hidden;
        }

        .section-progress-fill {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.5s;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .timer-container {
                grid-template-columns: 1fr;
            }
            
            .section-info {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .navigation {
                flex-direction: column;
                gap: 15px;
            }
            
            button {
                width: 100%;
                justify-content: center;
            }
            
            .score {
                font-size: 50px;
                padding: 20px;
            }
        }

        /* Fullscreen styles */
        :fullscreen .container {
            max-width: 95%;
            padding: 30px;
        }

        :-webkit-full-screen .container {
            max-width: 95%;
            padding: 30px;
        }

        :-moz-full-screen .container {
            max-width: 95%;
            padding: 30px;
        }

        :-ms-fullscreen .container {
            max-width: 95%;
            padding: 30px;
        }

        /* Confetti effect */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: var(--primary);
            opacity: 0;
            z-index: 9999;
        }

        /* Loading spinner */
        .spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="no-copy-overlay" id="noCopyOverlay"></div>
    <div class="security-indicator" id="securityIndicator">
        <i class="fas fa-shield-alt"></i> SECURE MODE
    </div>
    
    <div class="container">
        <header>
            <h1><i class="fas fa-graduation-cap"></i> Hrishi Proctored Examination</h1>
            <p>Secure Online Testing Platform</p>
        </header>

        <div class="fullscreen-warning" id="fullscreenWarning">
            <strong><i class="fas fa-exclamation-triangle"></i> SECURITY WARNING!</strong> You have exited fullscreen mode. Your exam will be terminated in <span id="fullscreenCountdown">10</span> seconds.
        </div>

        <div class="exam-info">
            <div class="info-item">
                <strong>Total Questions</strong>
                <span>20</span>
            </div>
            <div class="info-item">
                <strong>Total Time</strong>
                <span>40 minutes</span>
            </div>
            <div class="info-item">
                <strong>Quantitative Aptitude</strong>
                <span>10 questions (90 sec each)</span>
            </div>
            <div class="info-item">
                <strong>Logical Reasoning</strong>
                <span>5 questions (75 sec each)</span>
            </div>
            <div class="info-item">
                <strong>Pseudo Code</strong>
                <span>5 questions (90 sec each)</span>
            </div>
        </div>

        <div class="warning">
            <h3><i class="fas fa-exclamation-circle"></i> Important Instructions</h3>
            <p>You must enter fullscreen mode to start the exam.</p>
            <p>Do not exit fullscreen mode during the exam - it will terminate automatically.</p>
            <p>Do not navigate away from the exam page or open new tabs.</p>
            <p>Text selection and right-click are disabled for security.</p>
            <p>Each question has a specific time limit based on the section.</p>
        </div>

        <div class="section-progress" id="sectionProgress">
            <div class="section-progress-item active" data-section="0">
                <div>Quantitative</div>
                <div class="section-progress-bar">
                    <div class="section-progress-fill" id="sectionProgress1"></div>
                </div>
            </div>
            <div class="section-progress-item" data-section="1">
                <div>Logical</div>
                <div class="section-progress-bar">
                    <div class="section-progress-fill" id="sectionProgress2"></div>
                </div>
            </div>
            <div class="section-progress-item" data-section="2">
                <div>Pseudo Code</div>
                <div class="section-progress-bar">
                    <div class="section-progress-fill" id="sectionProgress3"></div>
                </div>
            </div>
        </div>

        <div class="timer-container">
            <div class="timer-card">
                <div class="timer-label">Total Exam Time</div>
                <div class="timer" id="timer">40:00</div>
            </div>
            <div class="timer-card">
                <div class="timer-label">Current Question Time</div>
                <div class="question-timer" id="questionTimer">01:30</div>
            </div>
        </div>

        <div class="progress-container">
            <div class="progress-label">
                <span>Exam Progress</span>
                <span id="progressPercent">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
        </div>

        <div class="section-info">
            <div class="section-title" id="currentSection">Section 1: Quantitative Aptitude</div>
            <div class="question-counter" id="questionCounter">Question 1 of 20</div>
        </div>

        <div class="question-container" id="questionContainer">
            <!-- Question will be dynamically inserted here -->
        </div>

        <div class="navigation">
            <button id="prevBtn" disabled><i class="fas fa-arrow-left"></i> Previous Question</button>
            <button id="nextBtn">Next Question <i class="fas fa-arrow-right"></i></button>
            <button id="submitBtn" class="submit-btn" style="display: none;"><i class="fas fa-paper-plane"></i> Submit Exam</button>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal" id="accessCodeModal">
        <div class="modal-content">
            <h2><i class="fas fa-lock"></i> Enter Access Code</h2>
            <p>Please enter your unique access code to begin the examination.</p>
            <input type="password" class="access-code-input" id="accessCodeInput" placeholder="Enter access code" autocomplete="off">
            <p id="accessCodeError" style="color: var(--danger); display: none; margin-top: 10px;">
                <i class="fas fa-times-circle"></i> Invalid access code. Please try again.
            </p>
            <button id="verifyCodeBtn"><i class="fas fa-key"></i> Verify Code</button>
        </div>
    </div>

    <div class="modal" id="startModal">
        <div class="modal-content">
            <h2><i class="fas fa-play-circle"></i> Ready to Start?</h2>
            <p>You must enter fullscreen mode to begin the examination.</p>
            <p>If you exit fullscreen during the exam, it will be terminated automatically.</p>
            <button class="fullscreen-btn" id="enterFullscreenBtn">
                <i class="fas fa-expand"></i> Enter Fullscreen & Start Exam
            </button>
            <p style="font-size: 14px; color: var(--gray); margin-top: 15px;">
                <i class="fas fa-info-circle"></i> If fullscreen doesn't work, click anywhere on the page and try again.
            </p>
        </div>
    </div>

    <div class="modal" id="timeUpModal" style="display: none;">
        <div class="modal-content">
            <h2><i class="fas fa-clock"></i> Time's Up!</h2>
            <p>Your exam time has ended.</p>
            <p>Your responses have been submitted automatically.</p>
            <button id="viewResultsBtn"><i class="fas fa-chart-bar"></i> View Results</button>
        </div>
    </div>

    <div class="modal" id="resultsModal" style="display: none;">
        <div class="modal-content">
            <div class="results-container" id="resultsContainer">
                <!-- Results will be displayed here -->
            </div>
            <button id="closeResultsBtn"><i class="fas fa-times"></i> Close</button>
        </div>
    </div>

    <div class="modal" id="fullscreenTerminateModal" style="display: none;">
        <div class="modal-content">
            <h2><i class="fas fa-ban"></i> Exam Terminated</h2>
            <p>Your exam has been terminated because you exited fullscreen mode.</p>
            <p>This violates the exam security policy.</p>
        </div>
    </div>

    <div class="modal" id="loadingModal" style="display: none;">
        <div class="modal-content">
            <h2>Loading Exam</h2>
            <div class="spinner"></div>
            <p>Please wait while we prepare your exam...</p>
        </div>
    </div>

    <script>
        // Exam configuration
        const examConfig = {
            totalTime: 40 * 60, // 40 minutes in seconds
            sectionTimes: [90, 75, 90], // Time per question in seconds for each section
            questionsPerSection: [10, 5, 5],
            sectionNames: [
                "Quantitative Aptitude",
                "Logical & Analytical Reasoning", 
                "Pseudo Code"
            ]
        };

        // Access codes for 2 people
        const accessCodes = {
            "EXAM2024A": "Candidate A",
            "TEST789B": "Candidate B"
        };

        // State variables
        let currentQuestion = 0;
        let currentSection = 0;
        let totalTimeLeft = examConfig.totalTime;
        let questionTimeLeft = examConfig.sectionTimes[0];
        let timerInterval;
        let questionTimerInterval;
        let userAnswers = new Array(20).fill(null);
        let fullscreenCountdown;
        let isFullscreen = false;
        let currentUser = "";

        // Correct answers for all questions
        const correctAnswers = [
            'b', 'b', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'd', // Quantitative (1-10)
            'b', 'a', 'b', 'b', 'b', // Logical (11-15)
            'b', 'a', 'b', 'a', 'c'  // Pseudo Code (16-20)
        ];

        // DOM elements
        const timerElement = document.getElementById('timer');
        const questionTimerElement = document.getElementById('questionTimer');
        const progressElement = document.getElementById('progress');
        const progressPercent = document.getElementById('progressPercent');
        const accessCodeModal = document.getElementById('accessCodeModal');
        const startModal = document.getElementById('startModal');
        const timeUpModal = document.getElementById('timeUpModal');
        const resultsModal = document.getElementById('resultsModal');
        const fullscreenTerminateModal = document.getElementById('fullscreenTerminateModal');
        const loadingModal = document.getElementById('loadingModal');
        const accessCodeInput = document.getElementById('accessCodeInput');
        const accessCodeError = document.getElementById('accessCodeError');
        const verifyCodeBtn = document.getElementById('verifyCodeBtn');
        const enterFullscreenBtn = document.getElementById('enterFullscreenBtn');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const submitBtn = document.getElementById('submitBtn');
        const viewResultsBtn = document.getElementById('viewResultsBtn');
        const closeResultsBtn = document.getElementById('closeResultsBtn');
        const questionContainer = document.getElementById('questionContainer');
        const currentSectionElement = document.getElementById('currentSection');
        const questionCounterElement = document.getElementById('questionCounter');
        const resultsContainer = document.getElementById('resultsContainer');
        const noCopyOverlay = document.getElementById('noCopyOverlay');
        const fullscreenWarning = document.getElementById('fullscreenWarning');
        const fullscreenCountdownElement = document.getElementById('fullscreenCountdown');
        const securityIndicator = document.getElementById('securityIndicator');
        const sectionProgressItems = document.querySelectorAll('.section-progress-item');
        const sectionProgressFills = [
            document.getElementById('sectionProgress1'),
            document.getElementById('sectionProgress2'),
            document.getElementById('sectionProgress3')
        ];

        // Enhanced security - Prevent text selection and right-click
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            showSecurityWarning("Right-click is disabled for security.");
            return false;
        });

        document.addEventListener('selectstart', function(e) {
            e.preventDefault();
            return false;
        });

        document.addEventListener('dragstart', function(e) {
            e.preventDefault();
            return false;
        });

        // Prevent keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Disable F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U
            if (e.key === 'F12' || 
                (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J')) || 
                (e.ctrlKey && e.key === 'u')) {
                e.preventDefault();
                showSecurityWarning("Developer tools are disabled during the exam.");
            }
            
            // Prevent Ctrl+C and Ctrl+V
            if ((e.ctrlKey || e.metaKey) && (e.key === 'c' || e.key === 'v')) {
                e.preventDefault();
                showSecurityWarning("Copy-paste is disabled for security.");
            }
        });

        function showSecurityWarning(message) {
            securityIndicator.style.background = 'var(--danger)';
            securityIndicator.innerHTML = `<i class="fas fa-exclamation-triangle"></i> SECURITY ALERT`;
            
            setTimeout(() => {
                securityIndicator.style.background = 'var(--success)';
                securityIndicator.innerHTML = `<i class="fas fa-shield-alt"></i> SECURE MODE`;
            }, 3000);
        }

        // Show access code modal on page load
        window.onload = function() {
            accessCodeModal.style.display = 'flex';
        };

        // Verify access code
        verifyCodeBtn.addEventListener('click', function() {
            const enteredCode = accessCodeInput.value.trim();
            
            if (accessCodes[enteredCode]) {
                currentUser = accessCodes[enteredCode];
                accessCodeModal.style.display = 'none';
                loadingModal.style.display = 'flex';
                
                // Simulate loading
                setTimeout(() => {
                    loadingModal.style.display = 'none';
                    startModal.style.display = 'flex';
                }, 2000);
            } else {
                accessCodeError.style.display = 'block';
                accessCodeInput.value = '';
                accessCodeInput.focus();
            }
        });

        // Allow pressing Enter to submit access code
        accessCodeInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                verifyCodeBtn.click();
            }
        });

        // Enter fullscreen and start exam
        enterFullscreenBtn.addEventListener('click', function() {
            enterFullscreen();
        });

        // Fullscreen event listeners
        document.addEventListener('fullscreenchange', handleFullscreenChange);
        document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
        document.addEventListener('mozfullscreenchange', handleFullscreenChange);
        document.addEventListener('MSFullscreenChange', handleFullscreenChange);

        function handleFullscreenChange() {
            if (!document.fullscreenElement && !document.webkitFullscreenElement && 
                !document.mozFullScreenElement && !document.msFullscreenElement) {
                // Exited fullscreen
                if (isFullscreen) {
                    handleFullscreenExit();
                }
            } else {
                // Entered fullscreen
                isFullscreen = true;
                startModal.style.display = 'none';
                startExam();
            }
        }

        function handleFullscreenExit() {
            isFullscreen = false;
            fullscreenWarning.style.display = 'block';
            
            let countdown = 10;
            fullscreenCountdownElement.textContent = countdown;
            
            fullscreenCountdown = setInterval(function() {
                countdown--;
                fullscreenCountdownElement.textContent = countdown;
                
                if (countdown <= 0) {
                    clearInterval(fullscreenCountdown);
                    terminateExamDueToFullscreenExit();
                }
            }, 1000);
        }

        function terminateExamDueToFullscreenExit() {
            clearInterval(timerInterval);
            clearInterval(questionTimerInterval);
            fullscreenWarning.style.display = 'none';
            fullscreenTerminateModal.style.display = 'flex';
        }

        function enterFullscreen() {
            const element = document.documentElement;
            
            if (element.requestFullscreen) {
                element.requestFullscreen();
            } else if (element.webkitRequestFullscreen) {
                element.webkitRequestFullscreen();
            } else if (element.mozRequestFullScreen) {
                element.mozRequestFullScreen();
            } else if (element.msRequestFullscreen) {
                element.msRequestFullscreen();
            }
        }

        // Navigation buttons
        prevBtn.addEventListener('click', function() {
            if (currentQuestion > 0) {
                saveAnswer();
                showQuestion(currentQuestion - 1);
            }
        });

        nextBtn.addEventListener('click', function() {
            if (currentQuestion < 19) {
                saveAnswer();
                showQuestion(currentQuestion + 1);
            } else {
                submitExam();
            }
        });

        submitBtn.addEventListener('click', function() {
            submitExam();
        });

        viewResultsBtn.addEventListener('click', function() {
            timeUpModal.style.display = 'none';
            showResults();
        });

        closeResultsBtn.addEventListener('click', function() {
            resultsModal.style.display = 'none';
            // Exit fullscreen after viewing results
            if (document.exitFullscreen) {
                document.exitFullscreen();
            } else if (document.webkitExitFullscreen) {
                document.webkitExitFullscreen();
            } else if (document.mozCancelFullScreen) {
                document.mozCancelFullScreen();
            } else if (document.msExitFullscreen) {
                document.msExitFullscreen();
            }
        });

        // Initialize exam
        function startExam() {
            // Start the timers
            startTotalTimer();
            startQuestionTimer();
            
            // Show first question
            showQuestion(0);
            
            // Update section progress
            updateSectionProgress();
        }

        // Total exam timer
        function startTotalTimer() {
            timerInterval = setInterval(function() {
                totalTimeLeft--;
                
                // Update timer display
                const minutes = Math.floor(totalTimeLeft / 60);
                const seconds = totalTimeLeft % 60;
                timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                // Update progress bar
                const progressPercentage = ((examConfig.totalTime - totalTimeLeft) / examConfig.totalTime) * 100;
                progressElement.style.width = `${progressPercentage}%`;
                progressPercent.textContent = `${Math.round(progressPercentage)}%`;
                
                // Change timer color when time is running low
                if (totalTimeLeft <= 300) { // 5 minutes
                    timerElement.style.background = 'linear-gradient(135deg, var(--warning), #ffad33)';
                }
                if (totalTimeLeft <= 60) { // 1 minute
                    timerElement.style.background = 'linear-gradient(135deg, var(--danger), #e4606d)';
                }
                
                // Check if time is up
                if (totalTimeLeft <= 0) {
                    clearInterval(timerInterval);
                    clearInterval(questionTimerInterval);
                    timeUpModal.style.display = 'flex';
                }
            }, 1000);
        }

        // Question timer
        function startQuestionTimer() {
            // Clear any existing question timer
            if (questionTimerInterval) {
                clearInterval(questionTimerInterval);
            }
            
            // Set question time based on section
            const sectionIndex = getSectionForQuestion(currentQuestion);
            questionTimeLeft = examConfig.sectionTimes[sectionIndex];
            
            // Update question timer display
            updateQuestionTimerDisplay();
            
            // Start the timer
            questionTimerInterval = setInterval(function() {
                questionTimeLeft--;
                
                // Update display
                updateQuestionTimerDisplay();
                
                // Check if question time is up
                if (questionTimeLeft <= 0) {
                    clearInterval(questionTimerInterval);
                    // Auto-save and move to next question
                    saveAnswer();
                    if (currentQuestion < 19) {
                        showQuestion(currentQuestion + 1);
                    } else {
                        submitExam();
                    }
                }
            }, 1000);
        }

        // Update question timer display
        function updateQuestionTimerDisplay() {
            const minutes = Math.floor(questionTimeLeft / 60);
            const seconds = questionTimeLeft % 60;
            questionTimerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Change color when time is running low
            if (questionTimeLeft <= 10) {
                questionTimerElement.style.background = 'linear-gradient(135deg, var(--danger), #e4606d)';
            } else if (questionTimeLeft <= 30) {
                questionTimerElement.style.background = 'linear-gradient(135deg, var(--warning), #ffad33)';
            } else {
                questionTimerElement.style.background = 'linear-gradient(135deg, var(--warning), #ffad33)';
            }
        }

        // Show specific question
        function showQuestion(questionIndex) {
            currentQuestion = questionIndex;
            currentSection = getSectionForQuestion(questionIndex);
            
            // Update section info
            currentSectionElement.textContent = `Section ${currentSection + 1}: ${examConfig.sectionNames[currentSection]}`;
            
            // Update question counter
            questionCounterElement.textContent = `Question ${questionIndex + 1} of 20`;
            
            // Update navigation buttons
            prevBtn.disabled = (questionIndex === 0);
            
            if (questionIndex === 19) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'block';
            } else {
                nextBtn.style.display = 'block';
                submitBtn.style.display = 'none';
            }
            
            // Display the question
            displayQuestion(questionIndex);
            
            // Update section progress
            updateSectionProgress();
            
            // Restart question timer
            startQuestionTimer();
        }

        // Update section progress indicators
        function updateSectionProgress() {
            // Update active section
            sectionProgressItems.forEach((item, index) => {
                if (index === currentSection) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
            
            // Update progress bars for each section
            for (let i = 0; i < 3; i++) {
                const startQuestion = i === 0 ? 0 : i === 1 ? 10 : 15;
                const endQuestion = i === 0 ? 10 : i === 1 ? 15 : 20;
                const questionsInSection = endQuestion - startQuestion;
                
                let answeredInSection = 0;
                for (let q = startQuestion; q < endQuestion; q++) {
                    if (userAnswers[q] !== null) answeredInSection++;
                }
                
                const progress = (answeredInSection / questionsInSection) * 100;
                sectionProgressFills[i].style.width = `${progress}%`;
            }
        }

        // Get section for a question
        function getSectionForQuestion(questionIndex) {
            if (questionIndex < 10) return 0; // Quantitative
            if (questionIndex < 15) return 1; // Logical
            return 2; // Pseudo Code
        }

        // Display question
        function displayQuestion(questionIndex) {
            const question = getQuestionData(questionIndex);
            
            let optionsHTML = '';
            question.options.forEach((option, index) => {
                const optionLetter = String.fromCharCode(97 + index); // a, b, c, d
                const isSelected = userAnswers[questionIndex] === optionLetter;
                optionsHTML += `
                    <div class="option ${isSelected ? 'selected' : ''}">
                        <input type="radio" id="q${questionIndex}_${optionLetter}" name="q${questionIndex}" value="${optionLetter}" 
                               ${isSelected ? 'checked' : ''}>
                        <label for="q${questionIndex}_${optionLetter}">${option}</label>
                    </div>
                `;
            });
            
            questionContainer.innerHTML = `
                <div class="question-number"><i class="fas fa-question-circle"></i> Question ${questionIndex + 1}</div>
                <div class="question-text">${question.text}</div>
                <div class="options">${optionsHTML}</div>
            `;
            
            // Add event listeners to options
            document.querySelectorAll(`input[name="q${questionIndex}"]`).forEach(radio => {
                radio.addEventListener('change', function() {
                    userAnswers[questionIndex] = this.value;
                    
                    // Update visual selection
                    document.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.closest('.option').classList.add('selected');
                    
                    // Update section progress
                    updateSectionProgress();
                });
            });
        }

        // Save current answer
        function saveAnswer() {
            const selectedOption = document.querySelector(`input[name="q${currentQuestion}"]:checked`);
            if (selectedOption) {
                userAnswers[currentQuestion] = selectedOption.value;
            }
        }

        // Submit exam
        function submitExam() {
            clearInterval(timerInterval);
            clearInterval(questionTimerInterval);
            showResults();
        }

        // Show results - Only final score
        function showResults() {
            // Calculate score
            let score = 0;
            
            for (let i = 0; i < 20; i++) {
                if (userAnswers[i] === correctAnswers[i]) {
                    score++;
                }
            }
            
            // Performance message based on score
            let performanceMessage = "";
            if (score >= 18) {
                performanceMessage = "Outstanding performance! You've mastered the material.";
            } else if (score >= 15) {
                performanceMessage = "Excellent work! You have a strong understanding.";
            } else if (score >= 12) {
                performanceMessage = "Good job! You have a solid foundation.";
            } else if (score >= 8) {
                performanceMessage = "You're on the right track. Keep practicing to improve.";
            } else {
                performanceMessage = "Don't get discouraged. Review the material and try again.";
            }
            
            // Generate results HTML - Only showing final score
            let resultsHTML = `
                <div class="results-summary">
                    <h2><i class="fas fa-trophy"></i> Exam Completed</h2>
                    <p class="user-info">Candidate: <strong>${currentUser}</strong></p>
                    <p>Your exam has been successfully submitted and graded.</p>
                    <div class="score">${score}/20</div>
                    <div class="performance-message">${performanceMessage}</div>
                </div>
            `;
            
            resultsContainer.innerHTML = resultsHTML;
            resultsModal.style.display = 'flex';
            
            // Add confetti for good scores
            if (score >= 15) {
                createConfetti();
            }
        }

        // Create confetti effect
        function createConfetti() {
            const colors = ['#1a73e8', '#6c8ef5', '#28a745', '#ff9800', '#dc3545'];
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.top = '-10px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                confetti.style.opacity = '1';
                document.body.appendChild(confetti);
                
                // Animate confetti
                const animation = confetti.animate([
                    { top: '-10px', transform: `rotate(0deg)` },
                    { top: '100vh', transform: `rotate(${Math.random() * 720}deg)` }
                ], {
                    duration: 3000 + Math.random() * 3000,
                    easing: 'cubic-bezier(0.1, 0.8, 0.3, 1)'
                });
                
                // Remove confetti after animation
                animation.onfinish = () => {
                    confetti.remove();
                };
            }
        }

        // Get question data
        function getQuestionData(index) {
            const questions = [
                // Quantitative (1-10)
                { 
                    text: "If a train running at 60 km/h crosses a pole in 9 seconds, what is the length of the train?", 
                    options: ["120 m", "150 m", "180 m", "200 m"] 
                },
                { 
                    text: "A can complete a work in 10 days and B in 15 days. If they work together, in how many days will they finish the work?", 
                    options: ["5 days", "6 days", "7 days", "8 days"] 
                },
                { 
                    text: "If 5x â€“ 3 = 2x + 9, find x.", 
                    options: ["3", "4", "6", "12"] 
                },
                { 
                    text: "The ratio of ages of A and B is 4:5. If A's age is 24, what is B's age?", 
                    options: ["26", "28", "30", "32"] 
                },
                { 
                    text: "The average of 6, 8, 10, 12, 14 is:", 
                    options: ["9", "10", "11", "12"] 
                },
                { 
                    text: "Simple interest on â‚¹5000 at 8% p.a. for 2 years is:", 
                    options: ["â‚¹600", "â‚¹700", "â‚¹800", "â‚¹900"] 
                },
                { 
                    text: "The sum of first 20 natural numbers is:", 
                    options: ["190", "200", "210", "220"] 
                },
                { 
                    text: "If the cost price of 12 pens is equal to the selling price of 10 pens, profit % is:", 
                    options: ["10%", "15%", "20%", "25%"] 
                },
                { 
                    text: "A man covers 240 km in 4 hours. What is his speed in m/s?", 
                    options: ["12", "15", "16.67", "20"] 
                },
                { 
                    text: "The least number which is exactly divisible by 12, 18, 21, and 30 is:", 
                    options: ["630", "360", "420", "1260"] 
                },
                
                // Logical Reasoning (11-15)
                { 
                    text: "If CAT = 24 and DOG = 26, then BAT = ?", 
                    options: ["22", "23", "24", "25"] 
                },
                { 
                    text: "Find the odd one out:", 
                    options: ["16", "25", "36", "49"] 
                },
                { 
                    text: "Statements: All roses are flowers. Some flowers are red. Conclusions: 1. Some roses are red. 2. Some flowers are roses.", 
                    options: ["Only 1 follows", "Only 2 follows", "Both follow", "None follows"] 
                },
                { 
                    text: "Arrange the words in dictionary order: 1. Pretty 2. Present 3. Pressure 4. Presume", 
                    options: ["2,3,4,1", "2,4,3,1", "3,2,1,4", "4,3,2,1"] 
                },
                { 
                    text: 'If "PAPER" is coded as "OZODQ", then "WATER" will be coded as:', 
                    options: ["VZS DQ", "VZSDQ", "VXSDQ", "VZRDQ"] 
                },
                
                // Pseudo Code (16-20)
                { 
                    text: `What is the output of this code?<br>
                    int x = 5, y = 10;<br>
                    x = x + y;<br>
                    y = x - y;<br>
                    x = x - y;<br>
                    print(x, y);`, 
                    options: ["5 10", "10 5", "15 5", "0 15"] 
                },
                { 
                    text: `What is the output of this code?<br>
                    int a = 2, b = 3;<br>
                    for(i = 1; i <= b; i++)<br>
                       a = a * i;<br>
                    print(a);`, 
                    options: ["12", "6", "2", "8"] 
                },
                { 
                    text: `What is the output of this code?<br>
                    int n = 5, sum = 0;<br>
                    for(i=1; i<=n; i++)<br>
                       if(i%2==0)<br>
                          sum = sum + i;<br>
                    print(sum);`, 
                    options: ["5", "6", "10", "15"] 
                },
                { 
                    text: `What series is printed by this code?<br>
                    int a=1, b=1, n=5;<br>
                    for(i=1; i<=n; i++){<br>
                       print(a);<br>
                       int temp = a + b;<br>
                       a = b;<br>
                       b = temp;<br>
                    }`, 
                    options: ["1 1 2 3 5", "1 2 3 4 5", "1 3 4 7 11", "1 1 3 5 9"] 
                },
                { 
                    text: `What is the output of this code?<br>
                    int count = 0;<br>
                    for(i=1; i<=5; i++){<br>
                      for(j=1; j<=i; j++){<br>
                         count++;<br>
                      }<br>
                    }<br>
                    print(count);`, 
                    options: ["5", "10", "15", "25"] 
                }
            ];
            
            return questions[index];
        }
    </script>
</body>
</html>
